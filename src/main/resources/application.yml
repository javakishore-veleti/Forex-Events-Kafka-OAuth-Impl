spring:
  datasource:
    pg:
      url: jdbc:postgresql://${POSTGRES_HOST:localhost}:5432/forex_db
      jdbcUrl: jdbc:postgresql://${POSTGRES_HOST:localhost}:5432/forex_db
      username: ${POSTGRES_USER:forex}
      password: ${POSTGRES_PASSWORD:forex}
      driver-class-name: org.postgresql.Driver
      hikari:
        pool-name: HikariPool-PG
        maximum-pool-size: 5
        minimum-idle: 1

    h2:
      url: jdbc:h2:mem:forex_h2;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
      jdbcUrl: jdbc:h2:mem:forex_h2;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
      username: sa
      password:
      driver-class-name: org.h2.Driver
      hikari:
        pool-name: HikariPool-H2
        maximum-pool-size: 3
        minimum-idle: 1

  kafka:
    # ðŸ‘‡ Switches automatically between local and docker network hostnames
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:29092}

otel:
  service:
    name: forex-events-kafka-oauth
  exporter:
    otlp:
      endpoint: ${OTEL_EXPORTER_OTLP_ENDPOINT:http://localhost:4318}
  logs:
    exporter: none  # Jaeger doesnâ€™t handle logs
  metrics:
    exporter: none  # Prometheus scrapes directly

forex:
  kafka:
    topics:
      keycloak: oauth.keycloak.events
      google: oauth.google.events
      github: oauth.github.events
      microsoft: oauth.microsoft.events
      audit: oauth.audit
      errors: oauth.errors

feature:
  toggles:
    kafka:
      consumers:
        keycloak-oauth:
          enabled: true

management:
  tracing:
    enabled: true
  otlp:
    tracing:
      endpoint: ${OTEL_COLLECTOR_GRPC_ENDPOINT:http://localhost:4317}
      protocol: grpc
  prometheus:
    metrics:
      export:
        enabled: true
